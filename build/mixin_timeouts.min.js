/*
 mixin_timeouts.js
 (c) 2011 Kevin Malakoff.
 Mixin.Timeouts is freely distributable under the MIT license.
 See the following for full license details:
 https://github.com/kmalakoff/mixin/blob/master/LICENSE
 Dependencies: Mixin.Core
*/
var __bind=function(a,b){return function(){return a.apply(b,arguments)}};if(!Mixin&&(typeof exports!=="undefined")){this.Mixin=require("mixin_core").Mixin}if(!Mixin){throw new Error("Mixin.Timeouts: Dependency alert! Mixin is missing. Please ensure it is included")}Mixin.Timeouts||(Mixin.Timeouts={});Mixin.Timeouts._mixin_info={mixin_name:"Timeouts",initialize:function(){return Mixin.instanceData(this,"Timeouts",{timeouts:{}})},destroy:function(){return this.killAllTimeouts()},mixin_object:{addTimeout:function(b,f,d){var a,e,c;Mixin.Core._Validate.string(b,"Mixin.Timeouts.addTimeout","timeout_name");Mixin.Core._Validate.callback(f,"Mixin.Timeouts.addTimeout","callback");if(d===void 0){throw new Error("Mixin.Timeouts: missing wait on '"+(_.classOf(this))+"'")}if((typeof d!=="number")||(d<0)||(Math.floor(d)!==d)){throw new Error("Mixin.Timeouts: wait invalid on '"+(_.classOf(this))+"'")}e=Mixin.instanceData(this,"Timeouts");if(this.hasTimeout(b)){throw new Error("Mixin.Timeouts: timeout '"+b+"' already exists on '"+(_.classOf(this))+"'")}a=Array.prototype.slice.call(arguments,3);c=setTimeout((__bind(function(){this.killTimeout(b);return f.apply(this,a)},this)),d);e.timeouts[b]=c;return this},hasTimeout:function(a){var b;b=Mixin.instanceData(this,"Timeouts");return a in b.timeouts},timeoutCount:function(){var b,e,a,d,c;e=Mixin.instanceData(this,"Timeouts");b=0;c=e.timeouts;for(a in c){d=c[a];b++}return b},timeouts:function(){var e,b,a,d,c;e=Mixin.instanceData(this,"Timeouts");a=[];c=e.timeouts;for(b in c){d=c[b];a.push(b)}return a},killTimeout:function(a){var b;b=Mixin.instanceData(this,"Timeouts");if(!this.hasTimeout(a)){throw new Error("Mixin.Timeouts: timeout '"+a+"' does not exist. For a less-strict check, use killTimeoutIfExists")}this.killTimeoutIfExists(a);return this},killTimeoutIfExists:function(a){var c,b;c=Mixin.instanceData(this,"Timeouts");b=c.timeouts[a];if(b){clearTimeout(b)}delete c.timeouts[a];return this},killAllTimeouts:function(){var d,c,a,b;c=Mixin.instanceData(this,"Timeouts");b=c.timeouts;for(a in b){d=b[a];this.killTimeoutIfExists(a)}return this}}};Mixin.registerMixin(Mixin.Timeouts._mixin_info);